import org.gradle.internal.os.OperatingSystem

plugins {
    //Applies application plugin also
    id 'org.beryx.runtime' version '1.8.5'
}

apply plugin: 'java'

[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'

ext {
   javaMainClass = "packit.HelloWorld"
}

application {
    mainClassName = javaMainClass
}

repositories {
    mavenCentral()
    // You may define additional repositories, or even remove "mavenCentral()".
    // Read more about repositories here:
    //   http://www.gradle.org/docs/current/userguide/dependency_management.html#sec:repositories
}

dependencies {

}

jar {
    manifest {
        attributes(
            "Main-Class": javaMainClass
        )
    }
}

String osName = OperatingSystem.current().getName();
String osVersion = OperatingSystem.current().getVersion();
println "*** $osName $osVersion was detected."

jpackage {
    if (it.targetPlatform.operatingSystem.isLinux()) {
        println "*** Linux ***"
    } else if (it.targetPlatform.operatingSystem.isUnix()) {
        println "*** Unix ***"
    } else if (it.targetPlatform.operatingSystem.isWindows()) {
        println "*** Windows ***"
    } else if (it.targetPlatform.operatingSystem.isMacOsX()) {
        println "*** MacOsX ***"
    } else {
        println "*** Unknown ***"
    }
}